<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.awe.uc.dao.impl.UserImgDaoImpl">
    <resultMap id="UserImgMap" type="UserImg">
		<result column="id" property="id" jdbcType="DECIMAL" />
		<result column="User_No" property="userNo" jdbcType="VARCHAR" />
		<result column="img_Catalog" property="imgCatalog" jdbcType="VARCHAR" />
		<result column="img_Catalog_No" property="imgCatalogNo" jdbcType="VARCHAR" />
		<result column="Create_Time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="Update_Time" property="updateTime" jdbcType="TIMESTAMP" />
		<result column="Create_Name" property="createName" jdbcType="VARCHAR" />
		<result column="Update_Name" property="updateName" jdbcType="VARCHAR" />
		<result column="yn" property="yn" jdbcType="DECIMAL" />
    </resultMap>
    
    <sql id="userImgColumns">
    	id,User_No,img_Catalog,img_Catalog_No,Create_Time,Update_Time,Create_Name,Update_Name,yn
    </sql>
    
     <sql id="userImgUsedColumns">
    	User_No,img_Catalog,img_Catalog_No,Create_Time,Update_Time,Create_Name,Update_Name,yn
    </sql>

    <!-- 创建信息 -->
    <insert id="insert" parameterType="UserImg" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO User_Img(<include refid="userImgUsedColumns"/>) 
        VALUES (#{userNo},#{imgCatalog},#{imgCatalogNo},#{createTime},#{updateTime},#{createName},#{updateName},#{yn})
	</insert>
	
    <!-- 修改信息 -->
    <update id="update" parameterType="UserImg">
        <if test="_parameter != null">
            <if test="id != null and id > 0">
                update User_Img set
		        <if test="userNo != null and userNo != ''">
                	User_No = #{userNo,jdbcType=VARCHAR},
		        </if>
		        <if test="imgCatalog != null and imgCatalog != ''">
                	img_Catalog = #{imgCatalog,jdbcType=VARCHAR},
		        </if>
		        <if test="imgCatalogNo != null and imgCatalogNo != ''">
                	img_Catalog_No = #{imgCatalogNo,jdbcType=VARCHAR},
		        </if>
		        <if test="createName != null and createName != ''">
                	Create_Name = #{createName,jdbcType=VARCHAR},
		        </if>
		        <if test="updateName != null and updateName != ''">
                	Update_Name = #{updateName,jdbcType=VARCHAR},
		        </if>
                	update_time = now()
                where id = #{id}
            </if>
        </if>
    </update>

    <!-- 根据主键获取对象信息 -->
    <select id="getUserImgById" resultMap="UserImgMap" parameterType="java.lang.Long">
        <if test="_parameter != null">
            select <include refid="userImgColumns"/> from User_Img
            where id = #{_parameter} and yn = 1
        </if>
    </select>

    <!-- 根据查询Bean获取数据集合，不带翻页 -->
    <select id="queryUserImgList" resultMap="UserImgMap"
            parameterType="com.awe.uc.domain.query.UserImgQuery">
        select <include refid="userImgColumns"/> from User_Img where <include refid="queryUserImgListWhere"/>
    </select>

    <!-- 根据查询Bean获取数据集合，翻页 -->
    <select id="queryUserImgListWithPage" resultMap="UserImgMap"
            parameterType="com.awe.uc.domain.query.UserImgQuery">
        select <include refid="userImgColumns"/> from User_Img where <include refid="queryUserImgListWhere"/>
        order by create_time desc 
        limit #{startIndex},#{pageSize}
    </select>

    <!-- 根据查询Bean查询-判断是否存在 -->
    <select id="exist" resultType="java.lang.Integer" parameterType="UserImg">
        select count(1) from User_Img where yn = 1 and group_name = #{groupName,jdbcType=VARCHAR}
    </select>

    <!-- 根据查询Bean获取集合总数 -->
    <select id="queryUserImgCount" resultType="java.lang.Integer"
            parameterType="com.awe.uc.domain.query.UserImgQuery">
        select count(1) from User_Img where <include refid="queryUserImgListWhere"/>
    </select>

    <!-- 删除信息-逻辑删除 -->
    <update id="delete" parameterType="UserImg">
		update User_Img 
		set yn = 0, update_time = now(), update_user = #{updateUser,jdbcType=VARCHAR}
		where id = #{id}
    </update>

    <!-- 常用的查询Where条件 -->
    <sql id="queryUserImgListWhere">
    	yn = 1
        <if test="id != null and id != ''">
        	and id = #{id,jdbcType=DECIMAL}
        </if>
        <if test="userNo != null and userNo != ''">
        	and User_No = #{userNo,jdbcType=VARCHAR}
        </if>
        <if test="imgCatalog != null and imgCatalog != ''">
        	and img_Catalog = #{imgCatalog,jdbcType=VARCHAR}
        </if>
        <if test="imgCatalogNo != null and imgCatalogNo != ''">
        	and img_Catalog_No = #{imgCatalogNo,jdbcType=VARCHAR}
        </if>
        <if test="createTime != null and createTime != ''">
        	and Create_Time = #{createTime,jdbcType=TIMESTAMP}
        </if>
        <if test="updateTime != null and updateTime != ''">
        	and Update_Time = #{updateTime,jdbcType=TIMESTAMP}
        </if>
        <if test="createName != null and createName != ''">
        	and Create_Name = #{createName,jdbcType=VARCHAR}
        </if>
        <if test="updateName != null and updateName != ''">
        	and Update_Name = #{updateName,jdbcType=VARCHAR}
        </if>
        <if test="yn != null and yn != ''">
        	and yn = #{yn,jdbcType=DECIMAL}
        </if>
    </sql>
</mapper>